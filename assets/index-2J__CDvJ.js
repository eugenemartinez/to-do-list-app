function e(e,t){try{localStorage.setItem(e,JSON.stringify(t))}catch(s){}}function t(e){try{const t=localStorage.getItem(e);return t?JSON.parse(t):null}catch(t){return null}}function s(t){try{const t=document.querySelectorAll(".task-list-item"),s=[];t.forEach((e=>{s.push({name:e.dataset.name,dueDate:e.dataset.dueDate||"",status:e.dataset.status||"In Progress",description:e.dataset.description||""})})),e("tasks",s)}catch(s){}}function n(e,t,s=!0){if(!e)return;const n=s?e.value||new Date:null;return flatpickr(e,{dateFormat:"Y-m-d",altInput:!0,altFormat:"F j, Y",allowInput:!0,defaultDate:n,disableMobile:!0,onClose:t,onReady:function(e,t,s){s.altInput&&(s.altInput.style.textAlign="center")}})}function a(e){if(!e)return"";try{const t={year:"numeric",month:"long",day:"numeric"},s=new Date(e);return isNaN(s.getTime())?"":s.toLocaleDateString(void 0,t)}catch(t){return""}}!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const s of e)if("childList"===s.type)for(const e of s.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const c=(e,t)=>{switch(t){case"In Progress":e.style.backgroundColor="rgba(255, 255, 0, 0.5)",e.style.color="black";break;case"Stuck":e.style.backgroundColor="rgba(255, 0, 0, 0.5)",e.style.color="white";break;case"Done":e.style.backgroundColor="rgba(0, 255, 0, 0.5)",e.style.color="white";break;default:e.style.backgroundColor="white",e.style.color="black"}};function i(e,t,s,n){t.addEventListener("change",(s=>{switch(s.target.value){case"In Progress":case"in-progress-first":n.style.cssText="background-color: rgba(255, 255, 0, 1) !important; color: black !important;",e.style.cssText="background-color: rgba(255, 255, 0, 1) !important; color: black !important;",t.style.cssText="background-color: rgba(255, 255, 0, 1) !important; color: black !important;";break;case"Stuck":case"stuck-first":n.style.cssText="background-color: rgba(255, 0, 0, 1) !important; color: white !important;",e.style.cssText="background-color: rgba(255, 0, 0, 1) !important; color: white !important;",t.style.cssText="background-color: rgba(255, 0, 0, 1) !important; color: white !important;";break;case"Done":case"done-first":n.style.cssText="background-color: rgba(0, 255, 0, 1) !important; color: white !important;",e.style.cssText="background-color: rgba(0, 255, 0, 1) !important; color: white !important;",t.style.cssText="background-color: rgba(0, 255, 0, 1) !important; color: white !important;";break;default:n.style.cssText="background-color: #3a4a5a !important; color: black !important;",e.style.cssText="background-color: #3a4a5a !important; color: white !important;",t.style.cssText=""}}))}class o{constructor(e,t,s=""){this.name=e,this.dueDate=t,this.status="In Progress",this.description=s}createTaskElement(){const e=document.createElement("div");e.classList.add("task-list-item"),e.dataset.name=this.name,e.dataset.dueDate=this.dueDate,e.dataset.status=this.status,e.dataset.description=this.description;const t=document.createElement("input");t.type="checkbox",t.classList.add("task-item-checkbox");const a=document.createElement("input");a.type="text",a.classList.add("task-item-name-input"),a.value=this.name;const i=()=>{this.name=a.value,e.dataset.name=this.name,s()};a.addEventListener("keydown",(e=>{"Enter"===e.key&&(e.preventDefault(),a.blur(),i())})),a.addEventListener("blur",(()=>{a.classList.remove("editing"),i()})),a.addEventListener("focus",(()=>{a.classList.add("editing")}));const o=document.createElement("div");o.classList.add("task-date-container");const d=document.createElement("input");d.type="text",d.classList.add("task-item-date-input"),d.placeholder="Select date",d.value=this.dueDate,o.appendChild(d);const r=n(d,((t,n,a)=>{if(t.length>0){const n=a.formatDate(t[0],"Y-m-d");this.dueDate=n,e.dataset.dueDate=n,s()}}));if(d.nextElementSibling){const e=d.nextElementSibling;e.classList.add("task-item-date-input"),d.tabIndex=-1,d.style.display="none",e.addEventListener("click",(()=>{r.open()}))}o.addEventListener("click",(e=>{e.target===o&&r.open()})),o.appendChild(d);const l=document.createElement("select");l.classList.add("task-item-status"),["In Progress","Stuck","Done"].forEach((e=>{const t=document.createElement("option");t.value=e,t.textContent=e,e===this.status&&(t.selected=!0),l.appendChild(t)})),c(l,this.status),l.addEventListener("change",(()=>{this.status=l.value,e.dataset.status=this.status,c(l,this.status),s()}));const u=document.createElement("button");return u.classList.add("task-item-delete"),u.textContent="X",u.addEventListener("click",(()=>{e.classList.add("fade-out"),setTimeout((()=>{e.remove(),s()}),500)})),e.addEventListener("dblclick",(t=>{t.target===e&&window.showTaskDetails&&window.showTaskDetails(this)})),e.appendChild(t),e.appendChild(a),e.appendChild(o),e.appendChild(l),e.appendChild(u),e}}function d(){document.querySelectorAll(".task-item-checkbox").forEach((e=>{e.checked=!1})),document.querySelector('.task-header-checkbox input[type="checkbox"]').checked=!1}function r(){const e=document.querySelector(".task-header-actions"),t=document.querySelector(".task-header-name"),n=s=>{s?(e.style.display="block",t.style.display="none"):(e.style.display="none",t.style.display="block")},a=()=>{document.querySelector('.task-header-checkbox input[type="checkbox"]').checked||(()=>{const e=document.querySelectorAll(".task-item-checkbox");return Array.from(e).some((e=>e.checked))})()?n(!0):n(!1)};a();document.querySelector('.task-header-checkbox input[type="checkbox"]').addEventListener("change",a);document.querySelectorAll(".task-item-checkbox").forEach((e=>{e.addEventListener("change",a)}));const c=e=>{document.querySelectorAll(".task-item-checkbox:checked").forEach((t=>{const s=t.closest(".task-list-item").querySelector(".task-item-status");s.value=e,s.dispatchEvent(new Event("change"))})),s(),d(),a()};document.getElementById("markSelectedInProgressBtn").addEventListener("click",(()=>{c("In Progress")})),document.getElementById("markSelectedStuckBtn").addEventListener("click",(()=>{c("Stuck")})),document.getElementById("markSelectedDoneBtn").addEventListener("click",(()=>{c("Done")})),document.getElementById("removeSelectedBtn").addEventListener("click",(()=>{document.querySelectorAll(".task-item-checkbox:checked").forEach((e=>{const t=e.closest(".task-list-item");t.classList.add("fade-out"),setTimeout((()=>{t.remove(),s(),r()}),500)})),setTimeout((()=>{d(),a()}),500)}))}let l=[];function u(e,t){const s=function(e,t){return e.sort(((e,s)=>{const n=e.getAttribute("data-due-date")||"",a=s.getAttribute("data-due-date")||"";if(n&&!a)return-1;if(!n&&a)return 1;if(!n&&!a)return 0;const c=new Date(n).getTime(),i=new Date(a).getTime();return"descending"===t?i-c:c-i}))}(Array.from(e.querySelectorAll(".task-list-item")),t);e.innerHTML="",s.forEach((t=>{e.appendChild(t)}))}function m(e){e.innerHTML="",l.forEach((t=>{e.appendChild(t)}))}let k=[];function y(e){e.innerHTML="",k.forEach((t=>{e.appendChild(t)}))}function g(e){e.querySelectorAll(".task-list-item").forEach((e=>{e.style.display=""}))}function h(e){if(!e)return"";const t=new Date(e);if(isNaN(t.getTime()))return"";return`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}`}function p(e,t){const s=h(t);e.querySelectorAll(".task-list-item").forEach((e=>{const t=h(e.getAttribute("data-due-date")||"");e.style.display=t===s?"":"none"}))}function v(e){e.querySelectorAll(".task-list-item").forEach((e=>{e.style.display=""}))}!function(){const s=document.getElementById("toggleMode"),n=document.body;if(!s)return;const a=t("darkMode");"enabled"!==a&&null!==a||(n.classList.add("dark-mode"),s.checked=!0,e("darkMode","enabled")),s.addEventListener("change",(()=>{s.checked?(n.classList.add("dark-mode"),e("darkMode","enabled")):(n.classList.remove("dark-mode"),e("darkMode","disabled"))}))}(),function(){const e=document.getElementById("taskInput"),a=document.getElementById("taskDate"),c=document.getElementById("addTaskBtn"),i=document.getElementById("taskList");if(a){let l=function(){const e=function(){try{return t("tasks")||[]}catch(e){return[]}}();0!==e.length?(i.innerHTML="",e.forEach((e=>{const t=new o(e.name,e.dueDate,e.description);t.status=e.status||"In Progress";const s=t.createTaskElement();i.appendChild(s)}))):function(){if("true"===localStorage.getItem("sampleTasksAdded"))return;const e=new Date,t=new Date(e);t.setDate(t.getDate()-1);const n=new Date(e);n.setDate(n.getDate()+1);const a=e=>`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`;[{name:"Sample Task 1",dueDate:a(t),status:"Done",description:"This is a sample completed task with yesterday's due date."},{name:"Sample Task 2",dueDate:a(e),status:"Stuck",description:"This is a sample stuck task due today."},{name:"Sample Task 3",dueDate:a(n),status:"In Progress",description:"This is a sample in-progress task due tomorrow."}].forEach((e=>{const t=new o(e.name,e.dueDate,e.description);t.status=e.status;const s=t.createTaskElement();i.appendChild(s)})),s(),localStorage.setItem("sampleTasksAdded","true")}()},u=function(){const t=e.value.trim();let n="";if(m.selectedDates.length>0)n=m.formatDate(m.selectedDates[0],"Y-m-d");else{const e=new Date;n=m.formatDate(e,"Y-m-d")}if(t){const a=new o(t,n).createTaskElement();i.appendChild(a),s(),e.value="",m.setDate(new Date),d(),r(),e.focus()}else alert("Please enter a task name")};const m=n(a);c.addEventListener("click",u),e.addEventListener("keypress",(e=>{"Enter"===e.key&&u()})),a.nextElementSibling&&a.nextElementSibling.classList.contains("flatpickr-input")&&a.nextElementSibling.addEventListener("keypress",(e=>{"Enter"===e.key&&u()})),l()}}(),document.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelector('.task-header-checkbox input[type="checkbox"]'),t=()=>{const e=document.querySelectorAll(".task-item-checkbox");return Array.from(e).filter((e=>{const t=e.closest(".task-list-item");return t&&"none"!==t.style.display}))},s=()=>{document.querySelectorAll(".task-item-checkbox").forEach((s=>{s.addEventListener("change",(()=>{const s=t(),a=s.length>0&&s.every((e=>e.checked));e.checked=a,n(),r()}))}))};e.addEventListener("change",(()=>{var s;s=e.checked,t().forEach((e=>{e.checked=s})),n(),r()}));const n=()=>{const e=document.querySelectorAll(".task-item-checkbox"),t=Array.from(e).map((e=>e.checked));localStorage.setItem("taskCheckboxStates",JSON.stringify(t))},a=()=>{const s=t(),n=s.length>0&&s.every((e=>e.checked));e.checked=n};(()=>{const e=JSON.parse(localStorage.getItem("taskCheckboxStates"));e&&document.querySelectorAll(".task-item-checkbox").forEach(((t,s)=>{s<e.length&&(t.checked=e[s])})),d(),r()})(),s();const c=document.getElementById("taskList");new MutationObserver((()=>{s(),a()})).observe(c,{childList:!0});const i=new MutationObserver((e=>{e.forEach((e=>{"attributes"!==e.type||"style"!==e.attributeName&&"class"!==e.attributeName||a()}))}));c.querySelectorAll(".task-list-item").forEach((e=>{i.observe(e,{attributes:!0,attributeFilter:["style","class"]})})),new MutationObserver((e=>{e.forEach((e=>{"childList"===e.type&&e.addedNodes.length>0&&e.addedNodes.forEach((e=>{1===e.nodeType&&e.classList.contains("task-list-item")&&i.observe(e,{attributes:!0,attributeFilter:["style","class"]})}))}))})).observe(c,{childList:!0}),document.querySelectorAll(".filter-container").forEach((e=>{e.addEventListener("click",(()=>{setTimeout(a,100)}))}))})),function(){const e=document.getElementById("taskDetailOverlay"),t=document.getElementById("taskDetailCard"),i=document.getElementById("detailTaskName"),o=document.getElementById("detailDueDateInput"),d=document.getElementById("detailStatusDropdown"),r=document.getElementById("detailDescription"),l=document.getElementById("closeTaskDetail"),u=document.getElementById("detailSaveBtn"),m=document.getElementById("detailDeleteBtn");let k=null;const y=n(o,(()=>{h()}));function g(){e.classList.remove("active"),t.classList.remove("active"),setTimeout((()=>{e.style.display="none",t.style.display="none",k=null}),300)}function h(){if(!k)return;let e="In Progress";switch(d.value){case"in-progress":e="In Progress";break;case"stuck":e="Stuck";break;case"done":e="Done"}const t=y.selectedDates.length>0?y.formatDate(y.selectedDates[0],"Y-m-d"):"";k.dataset.name=i.value,k.dataset.dueDate=t,k.dataset.status=e,k.dataset.description=r.value;const n=k.querySelector(".task-item-name-input");n&&(n.value=i.value);const c=k.querySelector(".task-item-date-input");c&&(c.dataset.originalDate=t,c.value=t?a(t):"");const o=k.querySelector(".task-item-status");if(o){o.value=e;const t=new Event("change");o.dispatchEvent(t)}s()}function p(){k&&(k.classList.add("fade-out"),setTimeout((()=>{k.remove(),s(),g()}),500))}document.addEventListener("click",(s=>{const n=s.target.closest(".task-list-item");n&&(s.target.classList.contains("task-item-checkbox")||s.target.classList.contains("task-item-name-input")||s.target.classList.contains("task-item-date-input")||s.target.classList.contains("task-item-status")||s.target.classList.contains("task-item-delete")||function(s){k=s,i.value=s.dataset.name||"",s.dataset.dueDate?y.setDate(s.dataset.dueDate):y.clear();const n=s.dataset.status||"In Progress";let a="in-progress";switch(n){case"In Progress":default:a="in-progress";break;case"Stuck":a="stuck";break;case"Done":a="done";break;case"Not Started":a="not-started"}d.value=a,r.value=s.dataset.description||"",e.style.display="block",t.style.display="block",c(d,n),d.addEventListener("change",(()=>{const e=d.options[d.selectedIndex].text;c(d,e),h()})),i.addEventListener("blur",h),o.addEventListener("blur",h),r.addEventListener("blur",h),i.addEventListener("keydown",(e=>{"Enter"===e.key&&i.blur()})),r.addEventListener("keydown",(e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),r.blur())})),setTimeout((()=>{i.focus(),i.select()}),50),setTimeout((()=>{e.classList.add("active"),t.classList.add("active")}),10)}(n))})),l.addEventListener("click",g),e.addEventListener("click",g),u.addEventListener("click",g),m.addEventListener("click",p),document.addEventListener("keydown",(e=>{"block"===t.style.display&&("Escape"===e.key?g():"Enter"===e.key&&e.ctrlKey&&h())})),t.addEventListener("click",(e=>{e.stopPropagation()})),o.addEventListener("click",(()=>{y.open()}))}(),function(e,t,s){const n=document.getElementById(e),a=document.getElementById(t),c=document.getElementById(s),o=n.closest(".filter-container"),d=document.getElementById("taskInput");if(!(n&&a&&c&&o))return;n.dataset.defaultIcon=n.innerHTML,i(n,a,0,o);const r=()=>{""!==a.value?(c.classList.remove("hidden"),o.classList.add("active")):(c.classList.add("hidden"),o.classList.remove("active"))};n.addEventListener("click",(e=>{e.stopPropagation(),document.querySelectorAll(".filter-container").forEach((e=>{if(e!==o){const t=e.querySelector("select");t&&t.classList.add("hidden")}})),a.classList.remove("hidden"),""!==a.value&&c.classList.remove("hidden")})),a.addEventListener("change",(()=>{r()})),c.addEventListener("click",(e=>{e.stopPropagation(),a.value="",a.classList.add("hidden"),c.classList.add("hidden"),o.classList.remove("active"),n.dataset.defaultIcon&&(n.innerHTML=n.dataset.defaultIcon),a.dispatchEvent(new Event("change"))})),d&&d.addEventListener("click",(()=>{c.classList.contains("hidden")||c.click()}));const l=e=>{o.contains(e.target)||(a.classList.add("hidden"),""!==a.value?(c.classList.remove("hidden"),o.classList.add("active")):(c.classList.add("hidden"),o.classList.remove("active")))};document.addEventListener("click",l),r()}("filterByStatusBtn","filterStatusDropdown","resetFilterByStatusBtn"),function(e,t,s){const n=document.getElementById(e),a=document.getElementById(t),c=document.getElementById(s),o=n.closest(".filter-container"),d=document.getElementById("sortByDateBtn");if(!(n&&a&&c&&o))return;n.dataset.defaultIcon=n.innerHTML;const r=()=>{""!==a.value&&"Select Sort Order"!==a.value?c.classList.remove("hidden"):c.classList.add("hidden")};i(n,a,0,o),d&&d.addEventListener("click",(()=>{c.classList.contains("hidden")||c.click()})),n.addEventListener("click",(e=>{e.stopPropagation(),document.querySelectorAll(".filter-container").forEach((e=>{if(e!==o){const t=e.querySelector("select");t&&t.classList.add("hidden")}})),"in-progress-first"===a.value?a.value="stuck-first":"stuck-first"===a.value?a.value="done-first":a.value="in-progress-first",a.dispatchEvent(new Event("change",{bubbles:!0})),a.classList.remove("hidden"),r()})),a.addEventListener("change",(()=>{r()})),c.addEventListener("click",(e=>{e.stopPropagation(),a.value="",a.classList.add("hidden"),c.classList.add("hidden"),a.dispatchEvent(new Event("change"))}));const l=e=>{o.contains(e.target)||(a.classList.add("hidden"),r())};document.addEventListener("click",l),r()}("sortByStatusBtn","sortStatusDropdown","resetSortByStatusBtn"),function(e,t,s){const n=document.getElementById(e),a=document.getElementById(t),c=document.getElementById(s),i=n.closest(".filter-container"),o=document.getElementById("sortByStatusBtn");if(!(n&&a&&c&&i))return;n.dataset.defaultIcon='<i class="fas fa-sort" style="margin-right: 5px;"></i> <i class="fas fa-calendar-alt" style="margin-right: 5px;"></i>';const d=e=>{"Ascending"===e?(n.innerHTML='<i class="fas fa-arrow-up" style="margin-right: 5px;"></i> <i class="fas fa-calendar-alt" style="margin-right: 5px;"></i>',i.classList.add("active")):"Descending"===e?(n.innerHTML='<i class="fas fa-arrow-down" style="margin-right: 5px;"></i> <i class="fas fa-calendar-alt" style="margin-right: 5px;"></i>',i.classList.add("active")):(n.innerHTML=n.dataset.defaultIcon,i.classList.remove("active")),""!==e?c.classList.remove("hidden"):c.classList.add("hidden")};n.addEventListener("click",(e=>{e.stopPropagation(),document.querySelectorAll(".filter-container").forEach((e=>{if(e!==i){const t=e.querySelector("select");t&&t.classList.add("hidden")}})),"Ascending"===a.value?a.value="Descending":a.value="Ascending",d(a.value),a.classList.remove("hidden")})),a.addEventListener("change",(e=>{const t=e.target.value;d(t)})),c.addEventListener("click",(e=>{e.stopPropagation(),a.value="",a.classList.add("hidden"),c.classList.add("hidden"),i.classList.remove("active"),n.innerHTML=n.dataset.defaultIcon}));const r=e=>{i.contains(e.target)||(a.classList.add("hidden"),""!==a.value?(c.classList.remove("hidden"),i.classList.add("active")):(c.classList.add("hidden"),i.classList.remove("active")))};document.addEventListener("click",r),o&&o.addEventListener("click",(()=>{c.classList.contains("hidden")||c.click()})),a.value&&d(a.value)}("sortByDateBtn","sortDateDropdown","resetSortByDateBtn"),function(e,t,s){const n=document.getElementById(e),c=document.getElementById(t),i=document.getElementById(s),o=n.closest(".filter-container"),d=document.getElementById("taskInput");if(!(n&&c&&i&&o))return;const r=e=>{const t=document.createElement("span");t.style.visibility="hidden",t.style.whiteSpace="nowrap",t.style.fontSize=window.getComputedStyle(e).fontSize,t.style.fontFamily=window.getComputedStyle(e).fontFamily,"SELECT"===e.tagName?t.innerText=e.options[e.selectedIndex].text:t.innerText=e.value||e.placeholder,document.body.appendChild(t),e.style.width=`${t.offsetWidth+15}px`,document.body.removeChild(t)};c.classList.add("hidden");const l=()=>{""!==c.value?(i.classList.remove("hidden"),o.classList.add("active"),c.classList.remove("hidden"),r(c)):(i.classList.add("hidden"),o.classList.remove("active"),c.classList.add("hidden"))},u=flatpickr(n,{dateFormat:"Y-m-d",altInput:!0,altFormat:"F j, Y",allowInput:!0,disableMobile:!0,onChange:function(e,t,s){c.value=a(t),l()},onOpen:function(e,t,s){s.calendarContainer.style.top="auto",s.calendarContainer.style.left="auto"},onReady:function(e,t,s){s.altInput&&(s.altInput.style.position="absolute"),r(c)}});n.addEventListener("click",(e=>{e.stopPropagation(),document.querySelectorAll(".filter-container").forEach((e=>{if(e!==o){const t=e.querySelector("select");t&&t.classList.add("hidden")}})),u.open(),l()})),i.addEventListener("click",(e=>{e.stopPropagation(),c.value="",c.classList.add("hidden"),i.classList.add("hidden"),o.classList.remove("active"),u.clear()})),d&&d.addEventListener("click",(()=>{i.classList.contains("hidden")||i.click()})),document.addEventListener("click",(e=>{o.contains(e.target)||e.target.closest(".flatpickr-calendar")||l()})),c.placeholder="Select Date",l()}("filterByDateBtn","filterDateInput","resetFilterByDateBtn"),function(){const e=document.getElementById("filterTasksBtn"),t=document.getElementById("sortTasksBtn"),s=document.querySelectorAll(".filter-container");s.forEach((e=>e.classList.add("hidden"))),e.addEventListener("click",(()=>{s.forEach((e=>{(e.classList.contains("date-filter-container")||e.classList.contains("status-filter-container"))&&e.classList.toggle("hidden")}))})),t.addEventListener("click",(()=>{s.forEach((e=>{(e.classList.contains("date-sort-container")||e.classList.contains("status-sort-container"))&&e.classList.toggle("hidden")}))}))}(),function(e,t,s){const n=document.getElementById(e),a=document.getElementById(t),c=document.getElementById(s),i=document.getElementById("taskList");if(!(n&&a&&c&&i))return;l=Array.from(i.querySelectorAll(".task-list-item"));const o=()=>{const e="Ascending"===a.value?"ascending":"Descending"===a.value?"descending":"";e?u(i,e):m(i)};n.addEventListener("click",o),a.addEventListener("change",o),c.addEventListener("click",(()=>{a.value="",m(i)}))}("sortByDateBtn","sortDateDropdown","resetSortByDateBtn"),function(e,t,s){const n=document.getElementById(e),a=document.getElementById(t),c=document.getElementById(s),i=document.getElementById("taskList");if(!(n&&a&&c&&i))return;k=Array.from(i.querySelectorAll(".task-list-item"));const o=()=>{const e=a.value;e?function(e,t){const s=function(e,t){let s={"Not Started":3,"In Progress":2,Stuck:1,Done:0};return"in-progress-first"===t?s={"In Progress":3,Stuck:2,"Not Started":1,Done:0}:"stuck-first"===t?s={Stuck:3,"In Progress":2,"Not Started":1,Done:0}:"done-first"===t&&(s={Done:3,"In Progress":2,Stuck:1,"Not Started":0}),e.sort(((e,t)=>{const n=e.getAttribute("data-status")||"",a=t.getAttribute("data-status")||"";return s[a]-s[n]}))}(Array.from(e.querySelectorAll(".task-list-item")),t);e.innerHTML="",s.forEach((t=>{e.appendChild(t)}))}(i,e):y(i)};n.addEventListener("click",o),a.addEventListener("change",o),c.addEventListener("click",(()=>{a.value="",y(i)}))}("sortByStatusBtn","sortStatusDropdown","resetSortByStatusBtn"),function(e,t){const s=document.getElementById(e),n=document.getElementById(t),a=document.getElementById("taskList");s&&n&&a&&(s.addEventListener("change",(()=>{const e=s.value;e?function(e,t){e.querySelectorAll(".task-list-item").forEach((e=>{const s=e.getAttribute("data-status")||"";e.style.display=s===t?"":"none"}))}(a,e):g(a)})),n.addEventListener("click",(()=>{s.value="",g(a)})))}("filterStatusDropdown","resetFilterByStatusBtn"),function(e,t){const s=document.getElementById(e),n=document.getElementById("filterByDateBtn"),a=document.getElementById(t),c=document.getElementById("taskList");if(!(s&&a&&c&&n))return;new MutationObserver((e=>{for(const t of e)if("attributes"===t.type&&"value"===t.attributeName){const e=n.getAttribute("value");e?p(c,e):v(c);break}})).observe(n,{attributes:!0}),s.addEventListener("change",(()=>{const e=s.value;e?p(c,e):v(c)})),a.addEventListener("click",(()=>{s.value="",n.setAttribute("value",""),v(c)}))}("filterByDateBtn","resetFilterByDateBtn"),window.showTaskDetails=function(e){const t=document.querySelectorAll(".task-list-item");let s=null;for(const n of t)if(n.dataset.name===e.name&&n.dataset.dueDate===e.dueDate){s=n;break}if(s){const t=document.getElementById("taskDetailOverlay"),n=document.getElementById("taskDetailCard"),a=document.getElementById("detailTaskName"),i=document.getElementById("detailDescription");window.activeTaskElement=s,a.value=e.name||"";const o=document.getElementById("detailDueDateInput")._flatpickr;o&&o.setDate(e.dueDate||"");const d=document.getElementById("detailStatusDropdown");let r="in-progress";switch(e.status){case"In Progress":r="in-progress";break;case"Stuck":r="stuck";break;case"Done":r="done";break;case"Not Started":r="not-started"}d.value=r,i.value=e.description||"",t.style.display="block",n.style.display="block",c(d,e.status),d.addEventListener("change",(()=>{const e=d.options[d.selectedIndex].text;c(d,e),saveTaskChanges()})),a.addEventListener("blur",saveTaskChanges),detailDueDateInput.addEventListener("blur",saveTaskChanges),i.addEventListener("blur",saveTaskChanges),setTimeout((()=>{t.classList.add("active"),n.classList.add("active"),a.focus(),a.select()}),10)}};
